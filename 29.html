<html>
  <head>
    <title>Raku By Example</title>
    <meta name="keywords" content="raku">
    <meta name="description" content="Learn Raku By Example">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Open+Sans" rel="stylesheet"> 
  </head>
  <body>
    <div id="everything">
      <div id="title">
        <a href="index.html"><img src="rakudo.png"> Raku By Example</a>
      </div>
      <div id="github">
        <a href="https://ohmycloudy.github.io">View me on<img alt="GitHub" src="github.svg"></a>
      </div>
      <div id="nav">
        <h1>Examples</h1>
        <ul>
            <li><a href="1.html">1.hello-world</a></li>
            <li><a href="2.html">2.variables</a></li>
            <li><a href="3.html">3.types</a></li>
            <li><a href="4.html">4.conditions</a></li>
            <li><a href="5.html">5.looping</a></li>
            <li><a href="6.html">6.subroutines</a></li>
            <li><a href="7.html">7.arrays</a></li>
            <li><a href="8.html">8.hashes</a></li>
            <li><a href="9.html">9.operators</a></li>
            <li><a href="10.html">10.classes</a></li>
            <li><a href="11.html">11.list-comprehension</a></li>
            <li><a href="12.html">12.junctions</a></li>
            <li><a href="13.html">13.pattern-match</a></li>
            <li><a href="14.html">14.whatever</a></li>
            <li><a href="15.html">15.twigil</a></li>
            <li><a href="16.html">16.set</a></li>
            <li><a href="17.html">17.feed</a></li>
            <li><a href="18.html">18.flip</a></li>
            <li><a href="19.html">19.signatures</a></li>
            <li><a href="20.html">20.io</a></li>
            <li><a href="21.html">21.enum</a></li>
            <li><a href="22.html">22.traits</a></li>
            <li><a href="23.html">23.gather-take</a></li>
            <li><a href="24.html">24.subset</a></li>
            <li><a href="25.html">25.sort</a></li>
            <li><a href="26.html">26.smartmatch</a></li>
            <li><a href="27.html">27.roles</a></li>
            <li><a href="28.html">28.multi-dispatch</a></li>
            <li><a href="29.html">29.meta-operators</a></li>
            <li><a href="30.html">30.aomtic</a></li>
            <li><a href="31.html">31.binding</a></li>
            <li><a href="32.html">32.classify</a></li>
            <li><a href="33.html">33.destructure</a></li>
            <li><a href="34.html">34.dbi</a></li>
            <li><a href="35.html">35.dynamic-variables</a></li>
            <li><a href="36.html">36.labels</a></li>
            <li><a href="37.html">37.main</a></li>
            <li><a href="38.html">38.operators</a></li>
            <li><a href="39.html">39.pod</a></li>
            <li><a href="40.html">40.regex</a></li>
            <li><a href="41.html">41.q</a></li>
            <li><a href="42.html">42.topic_variable</a></li>
            <li><a href="43.html">43.hyper_operator</a></li>
            <li><a href="44.html">44.colonpairs</a></li>
            <li><a href="45.html">45.grammar</a></li>
            <li><a href="46.html">46.datetime</a></li>
            <li><a href="47.html">47.comb</a></li>
            <li><a href="48.html">48.chained_comparison</a></li>
            <li><a href="49.html">49.unicode</a></li>
            <li><a href="50.html">50.when</a></li>
            <li><a href="51.html">51.with</a></li>
            <li><a href="52.html">52.rotor</a></li>
            <li><a href="53.html">53.series_operator</a></li>
            <li><a href="54.html">54.range</a></li>
            <li><a href="55.html">55.slip</a></li>
            <li><a href="56.html">56.react_whenever</a></li>
            <li><a href="57.html">57.introspection</a></li>
            <li><a href="58.html">58.promise</a></li>
            <li><a href="59.html">59.threads</a></li>
        </ul>
      </div>
      <div id="content">
        
<pre id='vimCodeElement'>
<span class="Comment">## zip</span>

<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">a</span><span class="Statement">=</span><span class="Constant">1</span><span class="Statement">,</span><span class="Constant">2</span><span class="Statement">,</span><span class="Constant">3</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">b</span><span class="Statement">=</span><span class="Constant">4</span><span class="Statement">,</span><span class="Constant">5</span><span class="Statement">,</span><span class="Constant">6</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">c</span><span class="Statement">=</span><span class="Constant">7</span><span class="Statement">,</span><span class="Constant">8</span><span class="Statement">,</span><span class="Constant">9</span><span class="Statement">;</span>
<span class="Statement">for</span> <span class="Identifier">zip</span>(<span class="Identifier">@</span><span class="Identifier">a</span><span class="Statement">;</span> <span class="Identifier">@</span><span class="Identifier">b</span><span class="Statement">;</span> <span class="Identifier">@</span><span class="Identifier">c</span>) <span class="Statement">-&gt;</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">b</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">c</span> {<span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span><span class="Identifier">$</span><span class="Identifier">b</span><span class="Statement">,</span><span class="Identifier">$</span><span class="Identifier">c</span><span class="Statement">;</span>}

<span class="Comment">## X </span>

<span class="Identifier">say</span> <span class="Constant">0</span><span class="Statement">..</span><span class="Constant">9</span> <span class="Statement">X~</span> <span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> <span class="Statement">..</span> <span class="Special">'</span><span class="Constant">z</span><span class="Special">'</span><span class="Statement">;</span>

<span class="Comment">## Z</span>

<span class="Comment"># Loop over multiple arrays (or lists or tuples or whatever they're called in your language) and print the ith element of each. Use your language's &quot;for each&quot; loop if it has one, otherwise iterate through the collection in order with some other loop. </span>

<span class="Comment"># For this example, loop over the arrays (a,b,c), (A,B,C) and (1,2,3) to produce the output </span>
<span class="Comment"># aA1</span>
<span class="Comment"># bB2</span>
<span class="Comment"># cC3</span>

<span class="Statement">for</span> <span class="Special">&lt;</span><span class="Constant">a b c</span><span class="Special">&gt;</span> <span class="Statement">Z</span> <span class="Special">&lt;</span><span class="Constant">A B C</span><span class="Special">&gt;</span> <span class="Statement">Z</span> <span class="Constant">1</span><span class="Statement">,</span> <span class="Constant">2</span><span class="Statement">,</span> <span class="Constant">3</span> <span class="Statement">-&gt;</span> <span class="Identifier">$</span><span class="Identifier">x</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">y</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">z</span> {
   <span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">x</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">y</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">z</span><span class="Statement">;</span>
}

<span class="Comment"># The Z operator stops emitting items as soon as the shortest input list is exhausted. However, short lists are easily extended by replicating all or part of the list, or by appending any kind of lazy list generator to supply default values as necessary. </span>

<span class="Comment"># Note that we can also factor out the concatenation by making the Z metaoperator apply the ~ concatenation operator across each triple: </span>
<span class="Statement">for</span> <span class="Special">&lt;</span><span class="Constant">a b c</span><span class="Special">&gt;</span> <span class="Statement">Z~</span> <span class="Special">&lt;</span><span class="Constant">A B C</span><span class="Special">&gt;</span> <span class="Statement">Z~</span> <span class="Constant">1</span><span class="Statement">,</span> <span class="Constant">2</span><span class="Statement">,</span> <span class="Constant">3</span> <span class="Statement">-&gt;</span> <span class="Identifier">$</span><span class="Identifier">line</span> {
   <span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">line</span><span class="Statement">;</span>
}

<span class="Comment"># We could also use the zip-to-string with the reduction metaoperator: </span>
<span class="Statement">.</span><span class="Identifier">say</span> <span class="Statement">for</span> [<span class="Statement">Z~</span>] [<span class="Special">&lt;</span><span class="Constant">a b c</span><span class="Special">&gt;</span>]<span class="Statement">,</span> [<span class="Special">&lt;</span><span class="Constant">A B C</span><span class="Special">&gt;</span>]<span class="Statement">,</span> [<span class="Constant">1</span><span class="Statement">,</span><span class="Constant">2</span><span class="Statement">,</span><span class="Constant">3</span>]

<span class="Comment">## add three column</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">lines</span> <span class="Statement">=</span> <span class="Identifier">slurp</span>(<span class="Special">'</span><span class="Constant">3col.txt</span><span class="Special">'</span>)<span class="Statement">;</span>
<span class="Statement">for</span> <span class="Identifier">@</span><span class="Identifier">lines</span> <span class="Statement">-&gt;</span> <span class="Identifier">$</span><span class="Identifier">line</span> {
   <span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">b</span> <span class="Statement">=</span> <span class="Identifier">$</span><span class="Identifier">line</span><span class="Statement">.</span><span class="Identifier">comb</span>(<span class="Special">/</span><span class="Special">\d</span><span class="Special">+</span><span class="Special">/</span>)<span class="Statement">;</span>
   <span class="Identifier">say</span> <span class="Special">&quot;</span><span class="Identifier">@</span><span class="Identifier">b</span>[]<span class="Special">&quot;</span><span class="Statement">;</span>
   <span class="Identifier">say</span> <span class="Special">&quot;</span><span class="Constant">-</span><span class="Special">&quot;</span> <span class="Statement">x</span> <span class="Constant">45</span><span class="Statement">;</span>
}

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">fh</span> <span class="Statement">=</span> <span class="Identifier">open</span>(<span class="Special">'</span><span class="Constant">3col.txt</span><span class="Special">'</span>)<span class="Statement">;</span>
<span class="Comment"># say [+] ($fh.lines».words).[2];</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">l</span> <span class="Statement">=</span> <span class="Identifier">$</span><span class="Identifier">fh</span><span class="Statement">.</span><span class="Identifier">lines</span>»<span class="Statement">.</span><span class="Identifier">comb</span>(<span class="Special">/</span><span class="Special">\d</span><span class="Special">+</span><span class="Special">/</span>)<span class="Statement">;</span>
<span class="Identifier">say</span> <span class="Identifier">@</span><span class="Identifier">l</span><span class="Statement">.</span><span class="Identifier">elems</span><span class="Statement">;</span>


<span class="Comment">## 自定义中缀运算符</span>
<span class="Comment"># 该源文件必须保存为 UTF8 格式 才不会报 UTF-8 错误, 即使是中文注释</span>
<span class="Statement">sub</span> <span class="Identifier">infix</span><span class="Statement">:</span><span class="Special">&lt;</span><span class="Constant">中</span><span class="Special">&gt;</span>(<span class="Identifier">@</span><span class="Identifier">array</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">ins</span>) {
    <span class="Identifier">@</span><span class="Identifier">array</span><span class="Statement">.</span><span class="Identifier">splice</span>(<span class="Statement">+</span><span class="Identifier">@</span><span class="Identifier">array</span> <span class="Statement">/</span> <span class="Constant">2</span><span class="Statement">,</span> <span class="Constant">0</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">ins</span>)<span class="Statement">;</span>
    <span class="Special">return</span> <span class="Identifier">@</span><span class="Identifier">array</span><span class="Statement">;</span>
}

<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">a</span> <span class="Statement">=</span> <span class="Constant">1</span><span class="Statement">,</span><span class="Constant">2</span><span class="Statement">,</span><span class="Constant">4</span><span class="Statement">,</span><span class="Constant">5</span><span class="Statement">;</span>
<span class="Identifier">say</span> <span class="Identifier">@</span><span class="Identifier">a</span> 中 <span class="Constant">3</span><span class="Statement">;</span>

<span class="Comment">## 2次幂</span>

<span class="Statement">class</span> PowerBy2 {
    <span class="Special">has</span> <span class="Identifier">$</span><span class="Special">.</span><span class="Identifier">number</span><span class="Statement">;</span>

	<span class="Statement">method</span> power_by2() {
	    <span class="Special">return</span>  <span class="Identifier">$</span><span class="Special">.</span><span class="Identifier">number</span> <span class="Statement">**</span> <span class="Constant">2</span><span class="Statement">;</span>
	}
}

<span class="Special">my</span>  <span class="Identifier">$</span><span class="Identifier">test</span> <span class="Statement">=</span> PowerBy2<span class="Statement">.</span><span class="Identifier">new</span>(<span class="Constant">number</span><span class="Statement">=&gt;</span><span class="Constant">10</span>)<span class="Statement">;</span>
<span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">test</span><span class="Statement">.</span>power_by2<span class="Statement">;</span>

<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">a</span> <span class="Statement">=</span> <span class="Special">&lt;</span><span class="Constant">1 2 3 4</span><span class="Special">&gt;</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">b</span> <span class="Statement">=</span> <span class="Identifier">@</span><span class="Identifier">a</span>»<span class="Statement">.</span>power_by2<span class="Statement">;</span>
<span class="Identifier">say</span> <span class="Identifier">@</span><span class="Identifier">b</span><span class="Statement">;</span>

<span class="Comment">## max width</span>

<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">scores</span> <span class="Statement">=</span> <span class="Special">'</span><span class="Constant">Ana</span><span class="Special">'</span> <span class="Statement">=&gt;</span> <span class="Constant">8</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Dave</span><span class="Special">'</span> <span class="Statement">=&gt;</span> <span class="Constant">6</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Charlie</span><span class="Special">'</span> <span class="Statement">=&gt;</span> <span class="Constant">4</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Beth</span><span class="Special">'</span> <span class="Statement">=&gt;</span> <span class="Constant">4</span><span class="Statement">;</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">screen-width</span> <span class="Statement">=</span> <span class="Constant">30</span><span class="Statement">;</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">label-area-width</span> <span class="Statement">=</span> <span class="Constant">1</span> <span class="Statement">+</span> <span class="Statement">[max]</span> <span class="Identifier">@</span><span class="Identifier">scores</span>»<span class="Statement">.</span><span class="Identifier">key</span>»<span class="Statement">.</span><span class="Identifier">chars</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">max-score</span> <span class="Statement">=</span> <span class="Statement">[max]</span> <span class="Identifier">@</span><span class="Identifier">scores</span>»<span class="Statement">.</span><span class="Identifier">value</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">unit</span> <span class="Statement">=</span> (<span class="Identifier">$</span><span class="Identifier">screen-width</span> <span class="Statement">-</span> <span class="Identifier">$</span><span class="Identifier">label-area-width</span>) <span class="Statement">/</span> <span class="Identifier">$</span><span class="Identifier">max-score</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">format</span> <span class="Statement">=</span> <span class="Special">'</span><span class="Constant">%- </span><span class="Special">'</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">label-area-width</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant">s%s</span><span class="Special">\n</span><span class="Special">&quot;</span><span class="Statement">;</span>

<span class="Statement">for</span> <span class="Identifier">@</span><span class="Identifier">scores</span> {
    <span class="Identifier">printf</span> <span class="Identifier">$</span><span class="Identifier">format</span><span class="Statement">,</span> <span class="Statement">.</span><span class="Identifier">key</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">X</span><span class="Special">'</span> <span class="Statement">x</span> (<span class="Identifier">$</span><span class="Identifier">unit</span> <span class="Statement">*</span> <span class="Statement">.</span><span class="Identifier">value</span>)<span class="Statement">;</span>
}

<span class="Comment">## zip three elements</span>

<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">a</span><span class="Statement">=</span><span class="Constant">1</span><span class="Statement">,</span><span class="Constant">2</span><span class="Statement">,</span><span class="Constant">3</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">b</span><span class="Statement">=</span><span class="Constant">4</span><span class="Statement">,</span><span class="Constant">5</span><span class="Statement">,</span><span class="Constant">6</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">c</span><span class="Statement">=</span><span class="Constant">7</span><span class="Statement">,</span><span class="Constant">8</span><span class="Statement">,</span><span class="Constant">9</span><span class="Statement">;</span>
<span class="Statement">for</span> <span class="Identifier">zip</span>(<span class="Identifier">@</span><span class="Identifier">a</span><span class="Statement">;</span> <span class="Identifier">@</span><span class="Identifier">b</span><span class="Statement">;</span> <span class="Identifier">@</span><span class="Identifier">c</span>) <span class="Statement">-&gt;</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">b</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">c</span> {<span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span><span class="Identifier">$</span><span class="Identifier">b</span><span class="Statement">,</span><span class="Identifier">$</span><span class="Identifier">c</span><span class="Statement">;</span>}

<span class="Comment">## [-]</span>

<span class="Identifier">say</span> <span class="Statement">[-]</span> <span class="Special">&lt;</span><span class="Constant">10 5 3</span><span class="Special">&gt;</span><span class="Statement">;</span>
<span class="Identifier">say</span> <span class="Statement">[-]</span> <span class="Constant">10</span><span class="Statement">;</span>

<span class="Comment">## 扑克牌</span>

<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">suits</span>  <span class="Statement">=</span> <span class="Special">&lt;</span><span class="Constant">♣ ♢ ♡ ♠</span><span class="Special">&gt;</span><span class="Statement">;</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">ranks</span>  <span class="Statement">=</span> <span class="Constant">2</span><span class="Statement">..</span><span class="Constant">10</span><span class="Statement">,</span> <span class="Special">&lt;</span><span class="Constant">J Q K A</span><span class="Special">&gt;</span><span class="Statement">;</span>

<span class="Comment"># concatenate each rank with each suit (2♣ 2♢ 2♡ ... A♠)</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">deck</span> <span class="Statement">=</span> <span class="Identifier">@</span><span class="Identifier">ranks</span> <span class="Statement">X~</span> <span class="Identifier">@</span><span class="Identifier">suits</span><span class="Statement">;</span>

<span class="Comment"># build a hash of card names to point values</span>
<span class="Comment"># 52 张牌， 4 种花色， A 的值为 11 ， J、Q、K 为 10</span>
<span class="Special">my</span> <span class="Identifier">%</span><span class="Identifier">points</span> <span class="Statement">=</span> <span class="Identifier">@</span><span class="Identifier">deck</span> <span class="Statement">Z</span> <span class="Statement">@</span>( (<span class="Constant">2</span><span class="Statement">..</span><span class="Constant">10</span><span class="Statement">,</span> <span class="Constant">10</span><span class="Statement">,</span> <span class="Constant">10</span><span class="Statement">,</span> <span class="Constant">10</span><span class="Statement">,</span> <span class="Constant">11</span>) <span class="Statement">Xxx</span> <span class="Constant">4</span> )<span class="Statement">;</span>

<span class="Comment"># 把牌打乱</span>
<span class="Identifier">@</span><span class="Identifier">deck</span> <span class="Statement">.=</span> <span class="Identifier">pick</span>(<span class="Statement">*</span>)<span class="Statement">;</span> <span class="Comment"># shuffle the deck</span>
<span class="Special">my</span> <span class="Identifier">@</span><span class="Identifier">hand</span> <span class="Statement">=</span> <span class="Identifier">@</span><span class="Identifier">deck</span><span class="Statement">.</span><span class="Identifier">splice</span>(<span class="Constant">0</span><span class="Statement">,</span> <span class="Constant">5</span>)<span class="Statement">;</span> <span class="Comment"># 抓取前 5 张牌</span>
<span class="Identifier">say</span> <span class="Statement">~</span><span class="Identifier">@</span><span class="Identifier">hand</span><span class="Statement">;</span> <span class="Comment">#  显示抓取的是哪 5 张</span>
<span class="Identifier">say</span> <span class="Statement">[+]</span> <span class="Identifier">%</span><span class="Identifier">points</span>{<span class="Identifier">@</span><span class="Identifier">hand</span>}<span class="Statement">;</span> <span class="Comment"># 这 5 张牌面的值加起来是多少</span>
</pre>

      </div>
    </div>
  </body>
</html>
